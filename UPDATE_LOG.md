# BrowserGarage 更新日志

## v2.1.0 - Feature Update (2024)

### 🆕 新增功能

#### 1. 多语言支持
- ✅ 默认英文界面
- ✅ 支持中文切换
- ✅ 菜单栏语言选项
- ✅ 实时语言切换（无需重启）

**使用方法**：
```
菜单 → Language / 语言 → English / 中文
```

#### 2. 按钮事件整合
- ✅ **搬家按钮** - 完整实现搬家流程
  - 自动关闭浏览器
  - 移动应用程序目录
  - 移动用户数据
  - 创建符号链接（Junction）
  - 修复注册表路径
  - 修复快捷方式
  - 实时进度显示

- ✅ **还原按钮** - 一键还原到原位置
  - 删除符号链接
  - 移回应用程序目录
  - 移回用户数据
  - 进度显示

- ✅ **路径浏览按钮** - 文件夹选择
  - 源路径选择
  - 目标路径选择
  - 自动更新配置

#### 3. 图标占位符
- ✅ 创建脚本 `create_placeholder_icons.bat`
- ✅ 快速生成临时图标用于编译测试

### 📝 新增文件

```
新增源文件 (2个):
├── src/ui/move_handler.c          # 搬家和还原操作实现
└── src/utils/language.c            # 语言系统实现

新增头文件 (1个):
└── include/language.h              # 语言定义

新增文档 (3个):
├── README_EN.md                    # 英文文档
├── README_ZH.md                    # 中文文档
└── UPDATE_LOG.md                   # 本文件

新增脚本 (1个):
└── create_placeholder_icons.bat    # 图标占位符生成器
```

### 🔧 修改文件

```
修改文件 (5个):
├── include/ui/main_window.h        # 添加语言相关声明
├── src/ui/main_window.c            # 添加菜单和语言切换
├── src/ui/path_selector.c           # 添加语言支持
├── Makefile                         # 添加新源文件
└── build.bat                        # 添加新源文件
```

### 🌍 语言支持详情

支持的语言：
- 🇺🇸 **English** (默认)
- 🇨🇳 **中文** (简体)

覆盖的界面元素：
- 窗口标题
- 浏览器选择
- 搬家选项（复选框）
- 路径标签
- 状态显示
- 按钮文字
- 进度提示
- 菜单项

### 🎯 搬家流程

```
开始搬家
  ↓
1. 检查磁盘空间
  ↓
2. 关闭浏览器进程
  ↓
3. 移动应用程序目录（可选）
  ↓
4. 创建应用程序符号链接
  ↓
5. 移动用户数据（可选）
  ↓
6. 创建用户数据符号链接
  ↓
7. 修复注册表路径
  ↓
8. 修复快捷方式
  ↓
完成
```

### 🔄 还原流程

```
开始还原
  ↓
1. 关闭浏览器进程
  ↓
2. 删除应用程序符号链接
  ↓
3. 移回应用程序目录
  ↓
4. 删除用户数据符号链接
  ↓
5. 移回用户数据
  ↓
完成
```

### 📦 编译说明

#### 准备工作

**选项1：使用图标占位符（快速开始）**
```cmd
cd BrowserGarage
create_placeholder_icons.bat
make
```

**选项2：使用真实图标**
- 将图标文件放入 `res/icons/` 目录
- 文件名：
  - `app_icon.ico`
  - `chrome.ico`
  - `edge.ico`
  - `folder.ico`

#### 编译命令

**MinGW-w64:**
```bash
cd BrowserGarage
make clean
make
```

**MSVC:**
```cmd
cd BrowserGarage
build.bat
```

### ✅ 功能测试清单

#### 基础功能
- [ ] 程序正常启动
- [ ] 管理员权限自动请求
- [ ] 窗口显示正常
- [ ] 浏览器检测正确

#### 语言功能
- [ ] 默认英文界面
- [ ] 菜单显示语言选项
- [ ] 切换到中文
- [ ] 所有文本正确显示
- [ ] 切换回英文

#### 搬家功能
- [ ] 浏览器选择切换
- [ ] 复选框勾选/取消
- [ ] 路径浏览打开对话框
- [ ] 磁盘空间检查
- [ ] 进度对话框显示
- [ ] 搬家操作成功

#### 还原功能
- [ ] 还原按钮可用
- [ ] 进度显示
- [ ] 还原操作成功

### 🐛 已知问题

- 图标占位符仅用于编译测试，无实际图标显示
- 需要手动准备真实图标文件用于正式版本

### 📈 项目统计

| 指标 | 数量 |
|------|------|
| 总文件数 | 40+ |
| 源代码文件 | 15 |
| 头文件 | 14 |
| 支持的语言 | 2 |
| 总代码行数 | ~3500+ |

### 🚀 下一步计划

- [ ] 添加更多语言（日语、韩语等）
- [ ] 添加Firefox支持
- [ ] 改进错误处理和用户提示
- [ ] 添加备份功能
- [ ] 支持多个用户配置文件
- [ ] 添加日志记录功能

---

**感谢使用 BrowserGarage！** 🎉

如有问题或建议，欢迎反馈。